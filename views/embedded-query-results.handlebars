<!-- views/embedded-query-results.handlebars -->
<div class="embedded-results">
  {{#if rows.length}}
    <p class="result-count">Visar {{rows.length}} resultat</p>
    
    <table class="data-table">
      <thead>
        <tr>
          {{#each headers}}
            <th>{{this}}</th>
          {{/each}}
        </tr>
      </thead>
      <tbody>
        {{#each rows}}
          <tr>
            {{#each ../headers}}
              <td>
                {{#if (lookup ../this this)}}
                  {{#if (eq (lookup (lookup ../this this) "type") "uri")}}
                    <a href="/resource?uri={{encodeURIComponent (lookup (lookup ../this this) "value")}}&showLabels={{../../showLabels}}" class="uri-value" target="_parent">
                      {{#if ../../showLabels}}
                        {{#if (lookup ../../labelMap (lookup (lookup ../this this) "value"))}}
                          {{lookup ../../labelMap (lookup (lookup ../this this) "value")}}
                        {{else}}
                          {{lookup (lookup ../this this) "value"}}
                        {{/if}}
                      {{else}}
                        {{lookup (lookup ../this this) "value"}}
                      {{/if}}
                    </a>
                  {{else}}
                    <span class="literal-value">{{lookup (lookup ../this this) "value"}}</span>
                  {{/if}}
                {{else}}
                  <em>-</em>
                {{/if}}
              </td>
            {{/each}}
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{else}}
    <div class="no-data-message">
      <p>❌ Inga resultat hittades för denna fråga.</p>
    </div>
  {{/if}}
</div>

<style>
  /* Embedded specific styles */
  body {
    padding: 0;
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-size: 14px;
    background: transparent;
  }
  
  .embedded-results {
    padding: 0;
  }
  
  .data-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 5px;
    font-size: 13px;
  }
  
  .data-table th, .data-table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
  }
  
  .data-table th {
    background-color: #f5f7fa;
    font-weight: 600;
    color: #444;
  }
  
  .data-table tr:nth-child(even) {
    background-color: #f9f9f9;
  }
  
  .data-table tr:hover {
    background-color: #f0f0f0;
  }
  
  .uri-value {
    color: #0645ad;
    text-decoration: none;
  }
  
  .uri-value:hover {
    text-decoration: underline;
  }
  
  .literal-value {
    color: #333;
  }
  
  .result-count {
    margin: 5px 0;
    font-style: italic;
    color: #666;
    font-size: 13px;
  }
  
  .no-data-message {
    padding: 15px;
    text-align: center;
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 5px;
    color: #555;
  }
</style>